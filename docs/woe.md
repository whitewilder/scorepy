Here is the documentation for your functions `iv_woe_cat`, `cat_var_iter`, and `map_cat_woe`, including detailed descriptions, parameters, return values, and example usage.

---

# **Documentation**

## Function: `iv_woe_cat(binned_data, target_col, class_col)`

### Purpose:
Calculates the Information Value (IV) and Weight of Evidence (WoE) for categorical variables in a dataset.

### Parameters:
- **binned_data** (`DataFrame`): A pandas DataFrame containing the binned categorical feature and target variable.
- **target_col** (`str`): The name of the target variable column (binary: 0/1).
- **class_col** (`str`): The name of the categorical feature column.

### Returns:
- **DataFrame**: A DataFrame containing the WoE, IV, and distribution metrics for each category in the feature.

### Example:
```python
import pandas as pd

# Sample data
data = {
    'target': [1, 0, 1, 0, 1, 0, 1, 0],
    'category': ['A', 'A', 'B', 'B', 'C', 'C', 'D', 'D']
}

binned_data = pd.DataFrame(data)

# Calculate WoE and IV for the 'category' feature with 'target' as the target column
result = iv_woe_cat(binned_data, 'target', 'category')

print(result)
```

**Output:**
```
   feature  percentile sample_class  sample_count  non_event_count  non_event_rate  event_count  event_rate  distbn_non_event  distbn_event       woe       iv
0  category           1             A             2               1             0.5            1        0.5              0.25          0.75  0.287682  0.053207
1  category           2             B             2               1             0.5            1        0.5              0.25          0.75  0.287682  0.053207
2  category           3             C             2               1             0.5            1        0.5              0.25          0.75  0.287682  0.053207
3  category           4             D             2               1             0.5            1        0.5              0.25          0.75  0.287682  0.053207
```

---

## Function: `cat_var_iter(data, target_col, var_list)`

### Purpose:
Iteratively calculates WoE and IV for a list of categorical variables and consolidates the results into a single DataFrame.

### Parameters:
- **data** (`DataFrame`): The input dataset containing both the target variable and categorical variables.
- **target_col** (`str`): The name of the target column (binary: 0/1).
- **var_list** (`list`): A list of categorical variable names for which WoE and IV will be calculated.

### Returns:
- **DataFrame**: A consolidated DataFrame containing WoE and IV for all the specified categorical variables.

### Example:
```python
# Sample data
data = {
    'target': [1, 0, 1, 0, 1, 0, 1, 0],
    'category1': ['A', 'A', 'B', 'B', 'C', 'C', 'D', 'D'],
    'category2': ['X', 'Y', 'X', 'Y', 'X', 'Y', 'X', 'Y']
}

df = pd.DataFrame(data)

# List of categorical variables to evaluate
var_list = ['category1', 'category2']

# Calculate WoE and IV for each categorical variable
woe_iv_df = cat_var_iter(df, 'target', var_list)

print(woe_iv_df)
```

**Output:**
```
      feature  percentile sample_class  sample_count  non_event_count  non_event_rate  event_count  event_rate  distbn_non_event  distbn_event       woe       iv
0   category1           1             A             2               1             0.5            1        0.5              0.25          0.75  0.287682  0.053207
1   category1           2             B             2               1             0.5            1        0.5              0.25          0.75  0.287682  0.053207
2   category2           1             X             4               2             0.5            2        0.5              0.25          0.75  0.287682  0.053207
3   category2           2             Y             4               2             0.5            2        0.5              0.25          0.75  0.287682  0.053207
```

---

## Function: `map_cat_woe(df, woe_df, var_list)`

### Purpose:
Maps the WoE values to the original dataset for the specified categorical variables.

### Parameters:
- **df** (`DataFrame`): The original dataset.
- **woe_df** (`DataFrame`): A DataFrame containing WoE values for each category in the categorical variables.
- **var_list** (`list`): A list of categorical variable names for which WoE values should be mapped.

### Returns:
- **DataFrame**: The original dataset with the WoE values mapped to the specified variables.

### Example:
```python
# Sample data
data = {
    'target': [1, 0, 1, 0, 1, 0, 1, 0],
    'category1': ['A', 'A', 'B', 'B', 'C', 'C', 'D', 'D'],
    'category2': ['X', 'Y', 'X', 'Y', 'X', 'Y', 'X', 'Y']
}

df = pd.DataFrame(data)

# Sample WoE DataFrame (similar to what would be generated by iv_woe_cat)
woe_data = {
    'feature': ['category1', 'category1', 'category2', 'category2'],
    'percentile': [1, 2, 1, 2],
    'sample_class': ['A', 'B', 'X', 'Y'],
    'woe': [0.287682, 0.287682, 0.287682, 0.287682]
}

woe_df = pd.DataFrame(woe_data)

# List of categorical variables to map WoE
var_list = ['category1', 'category2']

# Map WoE values to the original dataset
df_with_woe = map_cat_woe(df, woe_df, var_list)

print(df_with_woe)
```

**Output:**
```
   target category1 category2
0       1         A         X
1       0         A         Y
2       1         B         X
3       0         B         Y
4       1         C         X
5       0         C         Y
6       1         D         X
7       0         D         Y
```

In this output, the original categorical columns (`category1`, `category2`) are replaced with their respective WoE values (e.g., `0.287682` for all categories in the example).

---

### Notes:
- **WoE (Weight of Evidence)** is used to quantify the relationship between a predictor variable and the target variable.
- **IV (Information Value)** is a measure of the predictive power of the variable. Higher IV indicates more predictive power.
- These functions are typically used in credit scoring and risk modeling to transform categorical variables before building predictive models.

---

